#!/bin/bash

# ScrapyUI çµ±åˆç®¡ç†ã‚³ãƒãƒ³ãƒ‰
# ä½¿ç”¨æ–¹æ³•: ./scrapyui {start|stop|restart|status|logs}

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

case "${1:-help}" in
    "start")
        echo "ğŸš€ Starting ScrapyUI..."
        ./start_scrapyui.sh start
        ;;
    "stop")
        echo "ğŸ›‘ Stopping ScrapyUI..."
        ./start_scrapyui.sh stop
        ;;
    "restart")
        echo "ğŸ”„ Restarting ScrapyUI..."
        ./start_scrapyui.sh restart
        ;;
    "status")
        ./start_scrapyui.sh status
        ;;
    "logs")
        echo "ğŸ“‹ ScrapyUI Logs:"
        echo "=================="
        echo ""
        echo "ğŸ“ Log files location: logs/"
        echo ""
        if [ -n "$2" ]; then
            # ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’è¡¨ç¤º
            if [ -f "logs/$2.log" ]; then
                echo "ğŸ“„ Showing logs for $2:"
                echo "========================"
                tail -f "logs/$2.log"
            else
                echo "âŒ Log file not found: logs/$2.log"
                echo ""
                echo "Available logs:"
                ls -la logs/ 2>/dev/null || echo "No logs directory found"
            fi
        else
            # å…¨ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º
            echo "Available log files:"
            ls -la logs/ 2>/dev/null || echo "No logs directory found"
            echo ""
            echo "Usage: $0 logs [service-name]"
            echo "Example: $0 logs backend"
        fi
        ;;
    "help"|*)
        echo "ScrapyUI çµ±åˆç®¡ç†ã‚³ãƒãƒ³ãƒ‰"
        echo "========================"
        echo ""
        echo "ä½¿ç”¨æ–¹æ³•: $0 {command}"
        echo ""
        echo "ã‚³ãƒãƒ³ãƒ‰:"
        echo "  start    - ScrapyUIã‚’èµ·å‹•"
        echo "  stop     - ScrapyUIã‚’åœæ­¢"
        echo "  restart  - ScrapyUIã‚’å†èµ·å‹•"
        echo "  status   - ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ã‚’ç¢ºèª"
        echo "  logs     - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º"
        echo "  help     - ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"
        echo ""
        echo "ãƒ­ã‚°ç¢ºèª:"
        echo "  $0 logs           - åˆ©ç”¨å¯èƒ½ãªãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§"
        echo "  $0 logs backend   - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ­ã‚°ã‚’è¡¨ç¤º"
        echo "  $0 logs spider-manager - Spider Managerã®ãƒ­ã‚°ã‚’è¡¨ç¤º"
        echo ""
        echo "ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§:"
        echo "  - Backend Server (http://localhost:8000)"
        echo "  - Spider Manager (http://localhost:8002)"
        echo "  - Test Service (http://localhost:8005)"
        echo "  - Frontend (http://localhost:4000)"
        echo ""
        ;;
esac
